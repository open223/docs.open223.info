<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Model Inference - ASHRAE Standard 223P User Documentation</title><meta property="og:title" content="Model Inference - ASHRAE Standard 223P User Documentation"/><meta name="generator" content="mystmd"/><meta name="description" content="Documentation for the proposed ASHRAE Standard 223."/><meta property="og:description" content="Documentation for the proposed ASHRAE Standard 223."/><meta name="keywords" content=""/><link rel="stylesheet" href="/build/_assets/app-OIHP3NGU.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="ASHRAE Standard 223P User Documentation" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">ASHRAE Standard 223P User Documentation</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Explanation" class="block break-words rounded py-2 grow cursor-pointer">Explanation</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmpsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmpsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="open" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Tutorials" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">Tutorials</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rupsp:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:Rupsp:" class="pl-3 pr-[2px] collapsible-content"><a title="Model Exploration" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/model-exploration">Model Exploration</a><a title="Model Inference" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg myst-toc-item-exact bg-blue-300/30 active" href="/model-inference">Model Inference</a><a title="Creating a Model with BuildingMOTIF" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/model-creation-buildingmotif">Creating a Model with BuildingMOTIF</a></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Guides" class="block break-words rounded py-2 grow cursor-pointer">Guides</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Reference" class="block break-words rounded py-2 grow cursor-pointer">Reference</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1epsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1epsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/open223/docs.open223.info" title="GitHub Repository: open223/docs.open223.info" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/open223/docs.open223.info/edit/main/tutorials/model_inference.md" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Model Inference</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Note</div></div><div class="myst-admonition-body px-4 py-1"><p>The purpose of this tutorial is to show how SHACL inference applied to a 223 model can
make models easier to write and query. Specifically, this tutorial will teach the following:</p><ol start="1"><li><p>How to load SHACL inference rules defined in the 223 ontology into memory</p></li><li><p>How to apply SHACL inference rules to a 223 model to add all “implied” triples</p></li></ol></div></aside><p>For this tutorial, we’ll use an existing equipment model of a variable air volume (VAV) terminal unit with cooling only from section 4.1 of ASHRAE Guideline 36-2021.
This and other example models are available from <a class="hover-link" data-state="closed" href="/open223-resources">Open223 Models</a>.</p><h2 id="what-are-shacl-rules" class="relative group"><span class="heading-text">What are SHACL Rules?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-are-shacl-rules" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p><a target="_blank" rel="noreferrer" href="https://www.w3.org/TR/shacl-af/#rules" class="link">SHACL rules<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="external-link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> add implied information to graphs if certain conditions are met, i.e. if certain triples exist in the source graph.
The process of applying rules to an input model to generate new information (triples) is called <em>inference</em>.
Inference makes models easier to write because the model author does not have to manually include all the triples necessary to support the desired queries;
instead, some of those useful triples can be added “automatically” to the model through the use of inferencing.
One way to think of inference is a way of normalizing a 223 model.
Inference assures that the expected properties, types, and other annotations are present so that consumers of the model can make assumptions about what information will be contained within the graph.</p><h2 id="model-parsing" class="relative group"><span class="heading-text">Model Parsing</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#model-parsing" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>First, we’ll create a new empty graph then parse (load) an existing graph into it using the Python RDFLib library.</p><div id="e49O72D1qK" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from rdflib import Graph
# Create a Graph
model = Graph()
# Parse in an RDF file hosted on the Internet
model.parse(&quot;https://models.open223.info/guideline36-2021-A-1.ttl&quot;, format=&quot;ttl&quot;)
print(f&quot;The model contains {len(model)} triples&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="5LNwNRzBF4AP2SWpr0mqV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>The model contains 102 triples
</span></code></pre></div></div></div></div><details class="myst-dropdown rounded-md my-5 shadow dark:shadow-2xl dark:shadow-neutral-900 overflow-hidden bg-gray-50 dark:bg-stone-800"><summary class="myst-dropdown-header m-0 text-lg font-medium py-1 min-h-[2em] pl-3 cursor-pointer hover:shadow-[inset_0_0_0px_30px_#00000003] dark:hover:shadow-[inset_0_0_0px_30px_#FFFFFF03] bg-gray-100 dark:bg-slate-900"><span class="myst-dropdown-header-title text-neutral-900 dark:text-white"><span class="block float-right text-sm font-thin text-neutral-700 dark:text-neutral-200"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-dropdown-header-icon inline-block pl-2 mr-2 -translate-y-[1px] details-toggle transition-transform"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></span>Turtle representation of the model (pre-inference)</span></summary><div class="myst-dropdown-body px-4 py-1 details-body"><div class="block"><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(model.serialize())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div class=""><div class="output"></div></div></div></div></details><h3 id="testing-the-model-failed-query" class="relative group"><span class="heading-text">Testing the Model (Failed Query)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#testing-the-model-failed-query" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Below, we try to run a simple query on our model which asks what the terminal unit is connected to.
The <code>s223:connected</code> relationship does not exist in the pre-inference model, so this query will not return results.</p><div id="jq4KUB0XYZ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">parts_query = &quot;&quot;&quot;
PREFIX bldg: &lt;http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#&gt;
PREFIX s223: &lt;http://data.ashrae.org/standard223#&gt;
SELECT ?physical_space WHERE {
    bldg:VAVCoolingOnly s223:connected ?physical_space .
}&quot;&quot;&quot;

for row in model.query(parts_query):
    print(&#x27;\t&#x27;.join(row))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="HiG72WHz2WBcEZX8ERL-t" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><h2 id="loading-the-223-ontology" class="relative group"><span class="heading-text">Loading the 223 Ontology</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#loading-the-223-ontology" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The 223 ontology contains the rules we will use for inference.
We will load the 223 ontology into a separate graph from the model.
This is mostly for maintenance: it is easy enough to merge two graphs together into one, but it is much harder to factor them out again.
By keeping the ontology graph separate from the model graph, we can more easily maintain and version those graphs individually.</p><div id="t32pHmvbdV" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from rdflib import Graph
# Create a Graph
s223 = Graph()
# Parse in a recent copy of the 223 ontology
s223.parse(&quot;https://query.open223.info/ontologies/223p.ttl&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="giELfkf2X9SPFIG7PkP1d" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>&lt;Graph identifier=N6665f33f73a3463fb40866d3e00cb0f5 (&lt;class &#x27;rdflib.graph.Graph&#x27;&gt;)&gt;</span></code></div></div></div><h2 id="applying-inference-rules" class="relative group"><span class="heading-text">Applying Inference Rules</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#applying-inference-rules" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>To apply inference rules, we need an <em>inference engine</em>.
This is a piece of software which knows how to properly interpret and apply the SHACL rules defined in an ontology.
There are multiple closed-source and open-source implementations of SHACL available; some of these are listed on <a class="link" href="/other-resources">this page</a>
Below, we will be using the open-source <a target="_blank" rel="noreferrer" href="https://github.com/RDFLib/pySHACL" class="link">PySHACL<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="external-link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> library.</p><p>We import the PySHACL library and then invoke the <code>validate</code> function on our model graph (<em>data graph</em> in PySHACL parlance)
and our 223 graph (<em>shape graph</em> in PySHACL parlance).
We run this several times to ensure that all the rules are applied.</p><div id="Nv2g2LZ4io" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pyshacl

combined = model+s223
for _ in range(3):
    pyshacl.validate(combined,
        allow_infos=True,     # don&#x27;t fail if we get an INFO message
        allow_warnings=True,  # don&#x27;t fail if we get a WARNING message
        abort_on_first=False, # allow errors to happen during execution
        advanced=True,        # allow SHACL rules to execute
        iterate_rules=True,  # allow rules to be applied multiple times
        inplace=True          # update the &#x27;model&#x27; object with the inferred triples
    )
# remove the s223 graph from the model
model = combined - s223
print(f&quot;The model now contains {len(model)} triples&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="rE-nYm5SlwBNGEkYQNSTb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>The model now contains 146 triples
</span></code></pre></div></div></div></div><p>This may take a few minutes to run, depending on the size of your model.
If the PySHACL library is too slow, we recommend looking at alternate open-source implementations
like <a target="_blank" rel="noreferrer" href="https://github.com/TopQuadrant/shacl" class="link">TopQuadrant’s Java-based implementation<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="external-link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.</p><p>We can see from the print statement that several triples have been added to the model.</p><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Note</div></div><div class="myst-admonition-body px-4 py-1"><p>The <code>pyshacl.validate</code> function actually returns a SHACL validation report which can be used to fix
the model and make it compatible with the 223 ontology. See the <a class="link" href="/model_validation">Model Validation</a>
tutorial for how to access and interpret this report.</p></div></aside><details class="myst-dropdown rounded-md my-5 shadow dark:shadow-2xl dark:shadow-neutral-900 overflow-hidden bg-gray-50 dark:bg-stone-800"><summary class="myst-dropdown-header m-0 text-lg font-medium py-1 min-h-[2em] pl-3 cursor-pointer hover:shadow-[inset_0_0_0px_30px_#00000003] dark:hover:shadow-[inset_0_0_0px_30px_#FFFFFF03] bg-gray-100 dark:bg-slate-900"><span class="myst-dropdown-header-title text-neutral-900 dark:text-white"><span class="block float-right text-sm font-thin text-neutral-700 dark:text-neutral-200"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-dropdown-header-icon inline-block pl-2 mr-2 -translate-y-[1px] details-toggle transition-transform"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></span>Turtle representation of the model (post-inference)</span></summary><div class="myst-dropdown-body px-4 py-1 details-body"><div class="block"><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(model.serialize())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div class=""><div class="output"></div></div></div></div></details><h2 id="using-the-new-model" class="relative group"><span class="heading-text">Using the New Model</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#using-the-new-model" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>To demonstrate that the model contains new triples, we can try re-running the query from before.
We can see that the query returns results this time.</p><div id="ipFdAr2tmd" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">query = &quot;&quot;&quot;
PREFIX bldg: &lt;http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#&gt;
PREFIX s223: &lt;http://data.ashrae.org/standard223#&gt;
SELECT ?physical_space WHERE {
    bldg:VAVCoolingOnly s223:connected ?physical_space .
}&quot;&quot;&quot;

for row in model.query(query):
    print(&#x27;\t&#x27;.join(row))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="HcfAJ6tK5y2W3B8mNa_yF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#PhysicalSpace-hvac-domain
</span></code></pre></div></div></div></div><div class="myst-backmatter-parts"></div><div class="myst-footer-links flex pt-10 mb-10 space-x-4"><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-prev" href="/model-exploration"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Tutorials</div>Model Exploration</div></div></a><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-next" href="/model-creation-buildingmotif"><div class="flex h-full align-middle"><div class="flex-grow"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Tutorials</div>Creating a Model with BuildingMOTIF</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/build/_shared/chunk-7UUHRSK3.js"/><link rel="modulepreload" href="/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-EDJFWIEV.js"/><link rel="modulepreload" href="/build/_shared/chunk-ECLX7DIY.js"/><link rel="modulepreload" href="/build/routes/$-AD65NCUT.js"/><script>window.__remixContext = {"url":"/model-inference","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","title":"ASHRAE Standard 223P User Documentation","options":{},"nav":[],"actions":[],"projects":[{"title":"ASHRAE Standard 223P User Documentation","description":"Documentation for the proposed ASHRAE Standard 223.","github":"https://github.com/open223/docs.open223.info","toc":[{"file":"intro.md"},{"children":[{"file":"explanation/purpose_scope.md"},{"file":"explanation/definitions.md"},{"file":"explanation/223_overview.md"},{"file":"explanation/graph_structure.md"},{"file":"explanation/closed_world_assumption.md"},{"file":"explanation/heat_transfer_equipment.md"},{"file":"explanation/medium_mixtures.md"},{"file":"explanation/sensors_and_properties.md"}],"title":"Explanation"},{"children":[{"file":"tutorials/model_exploration.md"},{"file":"tutorials/model_inference.md"},{"file":"tutorials/model_creation_buildingmotif.md"}],"title":"Tutorials"},{"children":[{"file":"guides/design-patterns.md"},{"file":"guides/qudt.md"},{"file":"guides/brick-rec.md"}],"title":"Guides"},{"children":[{"file":"reference/open223-resources.md"},{"file":"reference/other-resources.md"}],"title":"Reference"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Explanation"},{"slug":"purpose-scope","title":"Purpose and Scope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"definitions","title":"Definitions and Concepts","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"overview","title":"223 Overview","description":"","date":"","thumbnail":"/build/connection-relations-ee342fb04746c2d2e80c4377dfaf8c81.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"graph-structure","title":"223 Graph Structure","description":"","date":"","thumbnail":"/build/ex-1-f27164b8f4003270be92b8285d3600db.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"closed-world-assumption","title":"Closed World Assumption","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"heat-transfer-equipment","title":"Heat Transfer Equipment","description":"","date":"","thumbnail":"/build/explanation-HeatExch-125210b298d03f168b7b1c4237371d77.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"medium-mixtures","title":"Medium Mixtures","description":"","date":"","thumbnail":"/build/mixed_medium-6b521802140a295cabf0f5d973694192.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"sensors-and-properties","title":"Sensors and Properties","description":"","date":"","thumbnail":"/build/sensor_platform-db6ef2328eb7478b1d1c556c0491a5fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Tutorials"},{"slug":"model-exploration","title":"Model Exploration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-inference","title":"Model Inference","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-creation-buildingmotif","title":"Creating a Model with BuildingMOTIF","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Guides"},{"slug":"design-patterns","title":"Modeling Design Patterns","description":"","date":"","thumbnail":"/build/guides-TopologyDiagr-4d96dfda8577164236c4a60d898ccaef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"qudt","title":"Using 223 with QUDT","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"brick-rec","title":"Using 223 with Brick and RealEstateCore","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Reference"},{"slug":"open223-resources","title":"Open223 Resources","description":"","date":"","thumbnail":"/build/explore-tabs-10c07685018a5bf019f7db0aeb186b8c.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"other-resources","title":"Other Resources","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":3,"myst":"1.8.0","title":"ASHRAE Standard 223P User Documentation","options":{},"nav":[],"actions":[],"projects":[{"title":"ASHRAE Standard 223P User Documentation","description":"Documentation for the proposed ASHRAE Standard 223.","github":"https://github.com/open223/docs.open223.info","toc":[{"file":"intro.md"},{"children":[{"file":"explanation/purpose_scope.md"},{"file":"explanation/definitions.md"},{"file":"explanation/223_overview.md"},{"file":"explanation/graph_structure.md"},{"file":"explanation/closed_world_assumption.md"},{"file":"explanation/heat_transfer_equipment.md"},{"file":"explanation/medium_mixtures.md"},{"file":"explanation/sensors_and_properties.md"}],"title":"Explanation"},{"children":[{"file":"tutorials/model_exploration.md"},{"file":"tutorials/model_inference.md"},{"file":"tutorials/model_creation_buildingmotif.md"}],"title":"Tutorials"},{"children":[{"file":"guides/design-patterns.md"},{"file":"guides/qudt.md"},{"file":"guides/brick-rec.md"}],"title":"Guides"},{"children":[{"file":"reference/open223-resources.md"},{"file":"reference/other-resources.md"}],"title":"Reference"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Explanation"},{"slug":"purpose-scope","title":"Purpose and Scope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"definitions","title":"Definitions and Concepts","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"overview","title":"223 Overview","description":"","date":"","thumbnail":"/build/connection-relations-ee342fb04746c2d2e80c4377dfaf8c81.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"graph-structure","title":"223 Graph Structure","description":"","date":"","thumbnail":"/build/ex-1-f27164b8f4003270be92b8285d3600db.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"closed-world-assumption","title":"Closed World Assumption","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"heat-transfer-equipment","title":"Heat Transfer Equipment","description":"","date":"","thumbnail":"/build/explanation-HeatExch-125210b298d03f168b7b1c4237371d77.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"medium-mixtures","title":"Medium Mixtures","description":"","date":"","thumbnail":"/build/mixed_medium-6b521802140a295cabf0f5d973694192.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"sensors-and-properties","title":"Sensors and Properties","description":"","date":"","thumbnail":"/build/sensor_platform-db6ef2328eb7478b1d1c556c0491a5fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Tutorials"},{"slug":"model-exploration","title":"Model Exploration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-inference","title":"Model Inference","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-creation-buildingmotif","title":"Creating a Model with BuildingMOTIF","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Guides"},{"slug":"design-patterns","title":"Modeling Design Patterns","description":"","date":"","thumbnail":"/build/guides-TopologyDiagr-4d96dfda8577164236c4a60d898ccaef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"qudt","title":"Using 223 with QUDT","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"brick-rec","title":"Using 223 with Brick and RealEstateCore","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Reference"},{"slug":"open223-resources","title":"Open223 Resources","description":"","date":"","thumbnail":"/build/explore-tabs-10c07685018a5bf019f7db0aeb186b8c.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"other-resources","title":"Other Resources","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":3,"kind":"Notebook","sha256":"bb13bee377840683e749a667c2f16463fc8d7ca0da321e5ea0f8e64059fbbc09","slug":"model-inference","location":"/tutorials/model_inference.md","dependencies":[],"frontmatter":{"title":"Model Inference","kernelspec":{"name":"open223-book","display_name":"open223-book","language":"python"},"jupytext":{"formats":"md:myst","text_representation":{"extension":".md","format_name":"myst"}},"content_includes_title":false,"github":"https://github.com/open223/docs.open223.info","numbering":{"title":{"offset":1}},"source_url":"https://github.com/open223/docs.open223.info/blob/main/tutorials/model_inference.md","edit_url":"https://github.com/open223/docs.open223.info/edit/main/tutorials/model_inference.md","exports":[{"format":"md","filename":"model_inference.md","url":"/build/model_inference-b356d9b8aeb9e7d068d1c00376a4632b.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"LRzpmlUq6y"}],"key":"kQRF0yCRHF"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"The purpose of this tutorial is to show how SHACL inference applied to a 223 model can\nmake models easier to write and query. Specifically, this tutorial will teach the following:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"C0dcMW8CMN"}],"key":"sG6TVC9nO9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"How to load SHACL inference rules defined in the 223 ontology into memory","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"riRTBjEVxb"}],"key":"V8BLt7CHma"}],"key":"zMSquSRGZd"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"How to apply SHACL inference rules to a 223 model to add all “implied” triples","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"sPzyOBGTVa"}],"key":"d70d8Lwrsa"}],"key":"wXE2LZSAHH"}],"key":"MZPrcY5N5i"}],"key":"eR2JrfPjOl"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"For this tutorial, we’ll use an existing equipment model of a variable air volume (VAV) terminal unit with cooling only from section 4.1 of ASHRAE Guideline 36-2021.\nThis and other example models are available from ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"q9GThp4p6r"},{"type":"link","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Open223 Models","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"FwfaBwWTtF"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"k3VYsxw8oM"},{"type":"text","value":".","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"r31HHdFNqd"}],"key":"W0G9kDghOQ"},{"type":"heading","depth":2,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"What are SHACL Rules?","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"t8acIryV2G"}],"identifier":"what-are-shacl-rules","label":"What are SHACL Rules?","html_id":"what-are-shacl-rules","implicit":true,"key":"W3foOGFRnw"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"link","url":"https://www.w3.org/TR/shacl-af/#rules","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"SHACL rules","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"qqPqjm5QXK"}],"urlSource":"https://www.w3.org/TR/shacl-af/#rules","key":"YS4kMfRoyK"},{"type":"text","value":" add implied information to graphs if certain conditions are met, i.e. if certain triples exist in the source graph.\nThe process of applying rules to an input model to generate new information (triples) is called ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"iv8UFFwPs0"},{"type":"emphasis","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"inference","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"e4W1Y6YN7c"}],"key":"SYmciYkz5t"},{"type":"text","value":".\nInference makes models easier to write because the model author does not have to manually include all the triples necessary to support the desired queries;\ninstead, some of those useful triples can be added “automatically” to the model through the use of inferencing.\nOne way to think of inference is a way of normalizing a 223 model.\nInference assures that the expected properties, types, and other annotations are present so that consumers of the model can make assumptions about what information will be contained within the graph.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"h9rF8MYhH8"}],"key":"TGDWo0fGio"},{"type":"heading","depth":2,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Model Parsing","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"ZlrSQ5zExQ"}],"identifier":"model-parsing","label":"Model Parsing","html_id":"model-parsing","implicit":true,"key":"QuLeNhgeG7"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"First, we’ll create a new empty graph then parse (load) an existing graph into it using the Python RDFLib library.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"mvtPm6lXTL"}],"key":"NdwBrqdkAC"}],"key":"LpJ3XcU3GH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from rdflib import Graph\n# Create a Graph\nmodel = Graph()\n# Parse in an RDF file hosted on the Internet\nmodel.parse(\"https://models.open223.info/guideline36-2021-A-1.ttl\", format=\"ttl\")\nprint(f\"The model contains {len(model)} triples\")","key":"P0Vm5BMEld"},{"type":"outputs","id":"5LNwNRzBF4AP2SWpr0mqV","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The model contains 102 triples\n"},"key":"NOGZxsZ24U"}],"key":"eMEe31Yxgt"}],"key":"e49O72D1qK"},{"type":"block","children":[{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Turtle representation of the model (pre-inference)","key":"L9oO7gKJqD"}],"key":"CB5ey8G24w"},{"type":"div","class":"block","children":[{"type":"code","lang":"python","meta":null,"value":"print(model.serialize())","key":"KLtn3FEzJD"},{"type":"div","children":[{"type":"div","class":"output","children":[],"key":"k83PwIg6Zi"}],"key":"HhY1CPNvJ1"}],"key":"azeonYHTsd"}],"key":"tnLR0Gj5tf"},{"type":"heading","depth":3,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"Testing the Model (Failed Query)","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"q0I18Qh04Q"}],"identifier":"testing-the-model-failed-query","label":"Testing the Model (Failed Query)","html_id":"testing-the-model-failed-query","implicit":true,"key":"QA0SBTkkAj"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"Below, we try to run a simple query on our model which asks what the terminal unit is connected to.\nThe ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Ss2ncvsyYy"},{"type":"inlineCode","value":"s223:connected","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Hx4qpfiv3U"},{"type":"text","value":" relationship does not exist in the pre-inference model, so this query will not return results.","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Y4zh8HCHZm"}],"key":"L0IEe3wb3S"}],"key":"NjNSlohisw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"parts_query = \"\"\"\nPREFIX bldg: \u003chttp://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#\u003e\nPREFIX s223: \u003chttp://data.ashrae.org/standard223#\u003e\nSELECT ?physical_space WHERE {\n    bldg:VAVCoolingOnly s223:connected ?physical_space .\n}\"\"\"\n\nfor row in model.query(parts_query):\n    print('\\t'.join(row))","key":"h4IrvDVCNW"},{"type":"outputs","id":"HiG72WHz2WBcEZX8ERL-t","children":[],"key":"QNM1LZulRl"}],"key":"jq4KUB0XYZ"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"Loading the 223 Ontology","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"f6gvTcQD54"}],"identifier":"loading-the-223-ontology","label":"Loading the 223 Ontology","html_id":"loading-the-223-ontology","implicit":true,"key":"pfjZzKENa2"},{"type":"paragraph","position":{"start":{"line":76,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"The 223 ontology contains the rules we will use for inference.\nWe will load the 223 ontology into a separate graph from the model.\nThis is mostly for maintenance: it is easy enough to merge two graphs together into one, but it is much harder to factor them out again.\nBy keeping the ontology graph separate from the model graph, we can more easily maintain and version those graphs individually.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"RC19GF7jbH"}],"key":"NglRtrNBoK"}],"key":"EWfIO5THQs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from rdflib import Graph\n# Create a Graph\ns223 = Graph()\n# Parse in a recent copy of the 223 ontology\ns223.parse(\"https://query.open223.info/ontologies/223p.ttl\")","key":"Wmi71tG76x"},{"type":"outputs","id":"giELfkf2X9SPFIG7PkP1d","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"\u003cGraph identifier=N6665f33f73a3463fb40866d3e00cb0f5 (\u003cclass 'rdflib.graph.Graph'\u003e)\u003e","content_type":"text/plain"}}},"key":"QokXc7Jj32"}],"key":"EeNspRp3Ix"}],"key":"t32pHmvbdV"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"Applying Inference Rules","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"bJUZyEMTdz"}],"identifier":"applying-inference-rules","label":"Applying Inference Rules","html_id":"applying-inference-rules","implicit":true,"key":"gVcSAhGf1O"},{"type":"paragraph","position":{"start":{"line":91,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"To apply inference rules, we need an ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"MFOWmZ0cio"},{"type":"emphasis","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"inference engine","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"kHTwMDET3f"}],"key":"NPLJ8YL5wN"},{"type":"text","value":".\nThis is a piece of software which knows how to properly interpret and apply the SHACL rules defined in an ontology.\nThere are multiple closed-source and open-source implementations of SHACL available; some of these are listed on ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"j3cOc90gJo"},{"type":"link","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"this page","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"hylgO6bgCh"}],"identifier":"other-resources","label":"other-resources","url":"/other-resources","internal":true,"dataUrl":"/other-resources.json","key":"s88ofTa37J"},{"type":"text","value":"\nBelow, we will be using the open-source ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"uxu1uumcyn"},{"type":"link","url":"https://github.com/RDFLib/pySHACL","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"PySHACL","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"OgUYtnPNtO"}],"urlSource":"https://github.com/RDFLib/pySHACL","error":true,"key":"s8HxPIbznq"},{"type":"text","value":" library.","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"O58h3fsIWP"}],"key":"r2ivJ1r6IR"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"We import the PySHACL library and then invoke the ","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"uT9NS23SPD"},{"type":"inlineCode","value":"validate","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"PGxIvtwKxq"},{"type":"text","value":" function on our model graph (","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"A7mqXtlFMI"},{"type":"emphasis","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"data graph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"H03l7sAnio"}],"key":"R1Njv3cmYu"},{"type":"text","value":" in PySHACL parlance)\nand our 223 graph (","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"iBHjyF2o2H"},{"type":"emphasis","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"shape graph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"ufkydWgHzj"}],"key":"fWST6IWuGG"},{"type":"text","value":" in PySHACL parlance).\nWe run this several times to ensure that all the rules are applied.","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"FkwlPTXe07"}],"key":"Ri4zyfcEby"}],"key":"IOZrlDqL6A"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pyshacl\n\ncombined = model+s223\nfor _ in range(3):\n    pyshacl.validate(combined,\n        allow_infos=True,     # don't fail if we get an INFO message\n        allow_warnings=True,  # don't fail if we get a WARNING message\n        abort_on_first=False, # allow errors to happen during execution\n        advanced=True,        # allow SHACL rules to execute\n        iterate_rules=True,  # allow rules to be applied multiple times\n        inplace=True          # update the 'model' object with the inferred triples\n    )\n# remove the s223 graph from the model\nmodel = combined - s223\nprint(f\"The model now contains {len(model)} triples\")","key":"eu4oATsxNc"},{"type":"outputs","id":"rE-nYm5SlwBNGEkYQNSTb","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The model now contains 146 triples\n"},"key":"KUlNKaBI8L"}],"key":"PQuzudqoJG"}],"key":"Nv2g2LZ4io"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"text","value":"This may take a few minutes to run, depending on the size of your model.\nIf the PySHACL library is too slow, we recommend looking at alternate open-source implementations\nlike ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"teQnB91PCz"},{"type":"link","url":"https://github.com/TopQuadrant/shacl","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"TopQuadrant’s Java-based implementation","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"MKQpeHJuLC"}],"urlSource":"https://github.com/TopQuadrant/shacl","error":true,"key":"cPpPpB4bmq"},{"type":"text","value":".","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"XW8M95lWqQ"}],"key":"aCqyjZIGdr"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"We can see from the print statement that several triples have been added to the model.","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"Qg9mBI36SZ"}],"key":"TsqwBsrcWt"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"YVsMpy33qB"}],"key":"lLcQQ4S0dw"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"Sm64FT6cVx"},{"type":"inlineCode","value":"pyshacl.validate","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"fVazIKYsp5"},{"type":"text","value":" function actually returns a SHACL validation report which can be used to fix\nthe model and make it compatible with the 223 ontology. See the ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"Om3bRzlT9l"},{"type":"link","url":"model_validation","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Model Validation","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"jCYCeIPkc0"}],"urlSource":"model_validation","key":"PN7N0PfYBY"},{"type":"text","value":"\ntutorial for how to access and interpret this report.","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"RHM6PuBVlT"}],"key":"yOTSvyFP53"}],"key":"MRxlOKd9Nl"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Turtle representation of the model (post-inference)","key":"aovZ3SwaLh"}],"key":"cl5kMXApKJ"},{"type":"div","class":"block","children":[{"type":"code","lang":"python","meta":null,"value":"print(model.serialize())","key":"b6m0I1ydNn"},{"type":"div","children":[{"type":"div","class":"output","children":[],"key":"sP8SP2PgeY"}],"key":"AX5zaC6ii8"}],"key":"kQgRrvxRYF"}],"key":"EgMKE0DCnc"},{"type":"heading","depth":2,"position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"Using the New Model","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"OKC9QfMkPT"}],"identifier":"using-the-new-model","label":"Using the New Model","html_id":"using-the-new-model","implicit":true,"key":"PmEvBGmyQ4"},{"type":"paragraph","position":{"start":{"line":141,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"To demonstrate that the model contains new triples, we can try re-running the query from before.\nWe can see that the query returns results this time.","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"op37lFpXQq"}],"key":"UrtcrxSVVH"}],"key":"Y42C60tly0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"query = \"\"\"\nPREFIX bldg: \u003chttp://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#\u003e\nPREFIX s223: \u003chttp://data.ashrae.org/standard223#\u003e\nSELECT ?physical_space WHERE {\n    bldg:VAVCoolingOnly s223:connected ?physical_space .\n}\"\"\"\n\nfor row in model.query(query):\n    print('\\t'.join(row))","key":"n2bEy1xIu6"},{"type":"outputs","id":"HcfAJ6tK5y2W3B8mNa_yF","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#PhysicalSpace-hvac-domain\n"},"key":"oH35LSPUko"}],"key":"VrQBT16j4D"}],"key":"ipFdAr2tmd"}],"key":"DndxWCy795"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Model Exploration","url":"/model-exploration","group":"Tutorials"},"next":{"title":"Creating a Model with BuildingMOTIF","url":"/model-creation-buildingmotif","group":"Tutorials"}}},"domain":"http://localhost:3000"},"project":{"title":"ASHRAE Standard 223P User Documentation","description":"Documentation for the proposed ASHRAE Standard 223.","github":"https://github.com/open223/docs.open223.info","toc":[{"file":"intro.md"},{"children":[{"file":"explanation/purpose_scope.md"},{"file":"explanation/definitions.md"},{"file":"explanation/223_overview.md"},{"file":"explanation/graph_structure.md"},{"file":"explanation/closed_world_assumption.md"},{"file":"explanation/heat_transfer_equipment.md"},{"file":"explanation/medium_mixtures.md"},{"file":"explanation/sensors_and_properties.md"}],"title":"Explanation"},{"children":[{"file":"tutorials/model_exploration.md"},{"file":"tutorials/model_inference.md"},{"file":"tutorials/model_creation_buildingmotif.md"}],"title":"Tutorials"},{"children":[{"file":"guides/design-patterns.md"},{"file":"guides/qudt.md"},{"file":"guides/brick-rec.md"}],"title":"Guides"},{"children":[{"file":"reference/open223-resources.md"},{"file":"reference/other-resources.md"}],"title":"Reference"}],"exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Explanation"},{"slug":"purpose-scope","title":"Purpose and Scope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"definitions","title":"Definitions and Concepts","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"overview","title":"223 Overview","description":"","date":"","thumbnail":"/build/connection-relations-ee342fb04746c2d2e80c4377dfaf8c81.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"graph-structure","title":"223 Graph Structure","description":"","date":"","thumbnail":"/build/ex-1-f27164b8f4003270be92b8285d3600db.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"closed-world-assumption","title":"Closed World Assumption","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"heat-transfer-equipment","title":"Heat Transfer Equipment","description":"","date":"","thumbnail":"/build/explanation-HeatExch-125210b298d03f168b7b1c4237371d77.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"medium-mixtures","title":"Medium Mixtures","description":"","date":"","thumbnail":"/build/mixed_medium-6b521802140a295cabf0f5d973694192.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"sensors-and-properties","title":"Sensors and Properties","description":"","date":"","thumbnail":"/build/sensor_platform-db6ef2328eb7478b1d1c556c0491a5fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Tutorials"},{"slug":"model-exploration","title":"Model Exploration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-inference","title":"Model Inference","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"model-creation-buildingmotif","title":"Creating a Model with BuildingMOTIF","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Guides"},{"slug":"design-patterns","title":"Modeling Design Patterns","description":"","date":"","thumbnail":"/build/guides-TopologyDiagr-4d96dfda8577164236c4a60d898ccaef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"qudt","title":"Using 223 with QUDT","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"brick-rec","title":"Using 223 with Brick and RealEstateCore","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Reference"},{"slug":"open223-resources","title":"Open223 Resources","description":"","date":"","thumbnail":"/build/explore-tabs-10c07685018a5bf019f7db0aeb186b8c.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"other-resources","title":"Other Resources","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-7B0967AD.js";
import * as route0 from "/build/root-EDJFWIEV.js";
import * as route1 from "/build/routes/$-AD65NCUT.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-PCJPW7TK.js");</script></body></html>