{"version":3,"kind":"Notebook","sha256":"9e56598607825f7aff9915f83cd8a2a5b6d404560469b2f1351d5c5b3ba01518","slug":"model-exploration","location":"/tutorials/model_exploration.md","dependencies":[],"frontmatter":{"title":"Model Exploration","kernelspec":{"name":"open223-book","display_name":"open223-book","language":"python"},"jupytext":{"formats":"md:myst","text_representation":{"extension":".md","format_name":"myst"}},"content_includes_title":false,"github":"https://github.com/open223/docs.open223.info","numbering":{"title":{"offset":1}},"source_url":"https://github.com/open223/docs.open223.info/blob/main/tutorials/model_exploration.md","edit_url":"https://github.com/open223/docs.open223.info/edit/main/tutorials/model_exploration.md","exports":[{"format":"md","filename":"model_exploration.md","url":"/build/model_exploration-3978d1bcad5abb7c98b3ae452f9ee633.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"bN3xVHwBen"}],"key":"omXnSkAEJN"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The purpose of this tutorial is to explore a model by learning the following:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"G99Alb71Qx"}],"key":"moOWxHDqUL"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parsing (loading) an existing model","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"N5F4vC72U8"}],"key":"CvqbN7lEFj"}],"key":"B5UNfdqOda"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Querying an existing model.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"QGLBA9Z2Qi"}],"key":"fPa2hSOJhR"}],"key":"eWm5UkJxi6"}],"key":"AWxI7LHazL"}],"key":"L7GmWisH2A"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"For this tutorial, we’ll use an existing equipment model of a variable air volume (VAV) terminal unit with cooling only from section 4.1 of ASHRAE Guideline 36-2021. This and other example models are available from ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"OeafCZNMnC"},{"type":"link","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Open223 Models","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"fi6LIWYDTW"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"QWO5xFlEjF"},{"type":"text","value":".","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"XdNmVgswRs"}],"key":"fVHqyFNd21"},{"type":"heading","depth":2,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Model Parsing","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"TSvz5EzDKf"}],"identifier":"model-parsing","label":"Model Parsing","html_id":"model-parsing","implicit":true,"key":"zcX7cmLipP"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"First, we’ll create a new empty graph then parse (load) an existing graph into it using the Python RDFLib library.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"aGYW4SnyeF"}],"key":"ButMJK9veY"}],"key":"ya5h8VGVzs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from rdflib import Graph\n\n# Create a Graph\ng = Graph()\n\n# Parse in an RDF file hosted on the Internet\ng.parse(\"https://models.open223.info/guideline36-2021-A-1.ttl\", format=\"ttl\")","key":"xMsjAHa3cc"},{"type":"outputs","id":"XWbJqq0RFBq-20n8hYxw-","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":1,"metadata":{},"data":{"text/plain":{"content":"<Graph identifier=N6d7cfaac38f1454aa3275175fc06c2ba (<class 'rdflib.graph.Graph'>)>","content_type":"text/plain"}}},"key":"iYvfyBomhY"}],"key":"iJCKt8hIWM"}],"key":"g57qsCrsfp"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"Next, we’ll explore the model’s size by printing the number of triples in it.","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"daOXM5b4fQ"}],"key":"BzUk2ZEmUm"}],"key":"BECqYBtYTB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print the number of \"triples\" in the Graph\nprint(f\"Graph g has {len(g)} statements.\")","key":"ZbRVQUJMIQ"},{"type":"outputs","id":"FtocGtRH__-uABh0k3baF","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Graph g has 102 statements.\n"},"key":"Es82aYSfCL"}],"key":"hYZvijtqcu"}],"key":"hGmbZIXjUU"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Finally, we’ll print the contents of the model since it’s not that large.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Vz464f4LYF"}],"key":"N4KI3BYUkT"}],"key":"I0JRqsTRrc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print out the entire Graph in the RDF Turtle format\nprint(g.serialize(format=\"turtle\"))","key":"lPUqlgLcX8"},{"type":"outputs","id":"NpA1e0EXbQmETIXjkOG8H","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"@prefix g36: <http://data.ashrae.org/standard223/1.0/extensions/g36#> .\n@prefix mysystem: <http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#> .\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix qudt: <http://qudt.org/schema/qudt/> .\n@prefix qudtqk: <http://qudt.org/vocab/quantitykind/> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix s223: <http://data.ashrae.org/standard223#> .\n@prefix unit: <http://qudt.org/vocab/unit/> .\n\nmysystem: a owl:Ontology ;\n    rdfs:label \"\" ;\n    owl:imports <http://data.ashrae.org/standard223/1.0/model/all> .\n\nmysystem:PhysicalSpace a s223:PhysicalSpace ;\n    rdfs:label \"Physicalspace\" ;\n    s223:encloses mysystem:PhysicalSpace-hvac-domain .\n\nmysystem:VAVCoolingOnly a s223:SingleDuctTerminal,\n        g36:VAV ;\n    rdfs:label \"Vavcoolingonly\" ;\n    s223:cnx mysystem:VAVCoolingOnly-in,\n        mysystem:VAVCoolingOnly-out ;\n    s223:contains mysystem:VAVCoolingOnly-damper .\n\nmysystem:VAVCoolingOnly-damper-actuator a s223:Actuator ;\n    rdfs:label \"Vavcoolingonly Damper Actuator\" ;\n    s223:actuatedByProperty mysystem:VAVCoolingOnly-damper-command ;\n    s223:actuates mysystem:VAVCoolingOnly-damper .\n\nmysystem:VAVCoolingOnly-discharge-air-flow-sensor a s223:Sensor ;\n    rdfs:label \"Vavcoolingonly Discharge Air Flow Sensor\" ;\n    s223:hasObservationLocation mysystem:VAVCoolingOnly-out ;\n    s223:observes mysystem:VAVCoolingOnly-discharge-air-flow .\n\nmysystem:VAVCoolingOnly-duct-after-damper a s223:Connection,\n        s223:Duct ;\n    rdfs:label \"Vavcoolingonly Duct After Damper\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-duct-before-damper a s223:Connection,\n        s223:Duct ;\n    rdfs:label \"Vavcoolingonly Duct Before Damper\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:zone a s223:Zone,\n        g36:Zone ;\n    rdfs:label \"Zone\" ;\n    s223:hasDomain s223:Domain-HVAC ;\n    s223:hasDomainSpace mysystem:PhysicalSpace-hvac-domain ;\n    s223:hasProperty mysystem:zone-co2-concentration,\n        mysystem:zone-temp .\n\nmysystem:PhysicalSpace-hvac-domain-in a s223:InletConnectionPoint ;\n    rdfs:label \"Physicalspace Hvac Domain In\" ;\n    s223:cnx mysystem:vav-supply-to-room-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:PhysicalSpace-hvac-domain-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Physicalspace Hvac Domain Out\" ;\n    s223:cnx mysystem:room-return-to-vav-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-damper-in a s223:InletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Damper In\" ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:mapsTo mysystem:VAVCoolingOnly-in .\n\nmysystem:VAVCoolingOnly-damper-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Damper Out\" ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:mapsTo mysystem:VAVCoolingOnly-out .\n\nmysystem:VAVCoolingOnly-damper-position a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Vavcoolingonly Damper Position\" ;\n    qudt:hasQuantityKind qudtqk:DimensionlessRatio ;\n    qudt:hasUnit unit:PERCENT .\n\nmysystem:zone-co2-concentration a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Zone Co2 Concentration\" ;\n    s223:ofMedium s223:Fluid-Air ;\n    s223:ofSubstance s223:Constituent-CO2 ;\n    qudt:hasQuantityKind qudtqk:MoleFraction ;\n    qudt:hasUnit unit:PPM .\n\nmysystem:zone-temp a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Zone Temp\" ;\n    qudt:hasQuantityKind qudtqk:Temperature ;\n    qudt:hasUnit unit:DEG_C .\n\nmysystem:PhysicalSpace-hvac-domain a s223:DomainSpace ;\n    rdfs:label \"Physicalspace Hvac Domain\" ;\n    s223:cnx mysystem:PhysicalSpace-hvac-domain-in,\n        mysystem:PhysicalSpace-hvac-domain-out ;\n    s223:hasDomain s223:Domain-HVAC .\n\nmysystem:VAVCoolingOnly-damper a s223:Damper,\n        g36:Damper ;\n    rdfs:label \"Vavcoolingonly Damper\" ;\n    s223:cnx mysystem:VAVCoolingOnly-damper-in,\n        mysystem:VAVCoolingOnly-damper-out ;\n    s223:hasProperty mysystem:VAVCoolingOnly-damper-command,\n        mysystem:VAVCoolingOnly-damper-position .\n\nmysystem:VAVCoolingOnly-damper-command a s223:QuantifiableActuatableProperty ;\n    rdfs:label \"Vavcoolingonly Damper Command\" ;\n    s223:hasAspect s223:Binary-Position ;\n    qudt:hasQuantityKind qudtqk:DimensionlessRatio ;\n    qudt:hasUnit unit:PERCENT .\n\nmysystem:VAVCoolingOnly-discharge-air-flow a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Vavcoolingonly Discharge Air Flow\" ;\n    s223:hasAspect s223:Role-Discharge ;\n    qudt:hasQuantityKind qudtqk:VolumeFlowRate ;\n    qudt:hasUnit unit:FT3-PER-MIN .\n\nmysystem:VAVCoolingOnly-in a s223:InletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly In\" ;\n    s223:cnx mysystem:room-return-to-vav-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:room-return-to-vav-connection a s223:Connection ;\n    rdfs:label \"Room Return To Vav Connection\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:vav-supply-to-room-connection a s223:Connection ;\n    rdfs:label \"Vav Supply To Room Connection\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Out\" ;\n    s223:cnx mysystem:vav-supply-to-room-connection ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:hasProperty mysystem:VAVCoolingOnly-discharge-air-flow .\n\n\n"},"key":"TKeZYtyaUr"}],"key":"EjxL1VKlc5"}],"key":"NyNIGyKFWm"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Model Querying","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"YoM75Xr9fA"}],"identifier":"model-querying","label":"Model Querying","html_id":"model-querying","implicit":true,"key":"hIqeQ9XEUn"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"After exploring the model to get a sense for what it contains, let’s query the model using RDFLib (this can also be done with ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"ygX0Fd4Vtp"},{"type":"link","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"Open223 Query","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"HSm5Cw8pvM"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"akJ5jz5y3I"},{"type":"text","value":"). For this tutorial, we’ll query the model for all the VAV terminal’s points, which are instances of the following classes:","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"i7Ncf7imVH"}],"key":"yzaZ5EGg9y"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"link","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Open223 Explore links","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"MSvmhtXxnB"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"LKqz3Rdynl"},{"type":"text","value":":","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"QmB6giYq48"}],"key":"l4gq4kcKPu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":57,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://explore.open223.info/s223/QuantifiableActuatableProperty.html","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"QuantifiableActuatableProperty","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"Ve8TWgFdvb"}],"urlSource":"https://explore.open223.info/s223/QuantifiableActuatableProperty.html","key":"WIBI4AHBYP"}],"key":"SYRFxsKy06"}],"key":"PivoDLY1zV"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://explore.open223.info/s223/QuantifiableObservableProperty.html","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"QuantifiableObservableProperty","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"fncaAOzdaF"}],"urlSource":"https://explore.open223.info/s223/QuantifiableObservableProperty.html","key":"kt74GmNK2Z"}],"key":"fuStJVNhkE"}],"key":"rSgrtGmy7v"}],"key":"lPmYTfnZsx"}],"key":"p7z28XKFwR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Query the data in g using SPARQL\nq = \"\"\"\nPREFIX s223: <http://data.ashrae.org/standard223#>\n\nSELECT ?obj WHERE {\n  { ?obj a s223:QuantifiableActuatableProperty . }\n  \tUNION\n  { ?obj a s223:QuantifiableObservableProperty . }\n}\n\"\"\"\n\n# Apply the query to the graph and iterate through results\nfor r in g.query(q):\n    print(r)","key":"CXRN2YBWTL"},{"type":"outputs","id":"N7s5LHeTZD72dNEO-c8Tb","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-damper-command'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-damper-position'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#zone-co2-concentration'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#zone-temp'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-discharge-air-flow'),)\n"},"key":"Vl6UxoxxV8"}],"key":"Me2nfABC9s"}],"key":"tNqRGBO4ge"}],"key":"PxujupX6sb"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Sensors and Properties","url":"/sensors-and-properties","group":"Explanation"},"next":{"title":"Model Inference","url":"/model-inference","group":"Tutorials"}}},"domain":"http://localhost:3000"}