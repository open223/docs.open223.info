{"version":3,"kind":"Notebook","sha256":"9e56598607825f7aff9915f83cd8a2a5b6d404560469b2f1351d5c5b3ba01518","slug":"model-exploration","location":"/tutorials/model_exploration.md","dependencies":[],"frontmatter":{"title":"Model Exploration","kernelspec":{"name":"open223-book","display_name":"open223-book","language":"python"},"jupytext":{"formats":"md:myst","text_representation":{"extension":".md","format_name":"myst"}},"content_includes_title":false,"github":"https://github.com/open223/docs.open223.info","numbering":{"title":{"offset":1}},"source_url":"https://github.com/open223/docs.open223.info/blob/main/tutorials/model_exploration.md","edit_url":"https://github.com/open223/docs.open223.info/edit/main/tutorials/model_exploration.md","exports":[{"format":"md","filename":"model_exploration.md","url":"/build/model_exploration-147d84509bc19d91939cc17882ba188b.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"xa8Q0pcO8A"}],"key":"LWaNodkgOP"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The purpose of this tutorial is to explore a model by learning the following:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"UUYGXLxj5r"}],"key":"AzdlMH0T9I"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parsing (loading) an existing model","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"qfeValVsGm"}],"key":"ibzjgkLMoP"}],"key":"RVl6f2wUVs"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Querying an existing model.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"JwhWX8U51j"}],"key":"MrMPOG4dX5"}],"key":"KSZA4fRaQ1"}],"key":"oX8KoxJjHP"}],"key":"fWB54Q2eFk"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"For this tutorial, we’ll use an existing equipment model of a variable air volume (VAV) terminal unit with cooling only from section 4.1 of ASHRAE Guideline 36-2021. This and other example models are available from ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"TqwjyC1g8e"},{"type":"link","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Open223 Models","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"r6nCxFeQdP"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"qwPXQ0HLxl"},{"type":"text","value":".","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"kM30pAuYnH"}],"key":"gGww1wTxHj"},{"type":"heading","depth":2,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Model Parsing","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"z4QsVMn2GC"}],"identifier":"model-parsing","label":"Model Parsing","html_id":"model-parsing","implicit":true,"key":"rXOWq56Pba"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"First, we’ll create a new empty graph then parse (load) an existing graph into it using the Python RDFLib library.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"fMPVfGNV6Z"}],"key":"pDclodSpVj"}],"key":"i9kYhJMdOJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from rdflib import Graph\n\n# Create a Graph\ng = Graph()\n\n# Parse in an RDF file hosted on the Internet\ng.parse(\"https://models.open223.info/guideline36-2021-A-1.ttl\", format=\"ttl\")","key":"AKn0zlQ4dq"},{"type":"outputs","id":"z-goeR8ZUzhe6J1zm2d_n","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":1,"metadata":{},"data":{"text/plain":{"content":"<Graph identifier=Nead3b20ec852483f9f9c11dca10383eb (<class 'rdflib.graph.Graph'>)>","content_type":"text/plain"}}},"key":"wnoq2jQkHg"}],"key":"JvP8KQaAlS"}],"key":"GbJvtYLmm5"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"Next, we’ll explore the model’s size by printing the number of triples in it.","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"HXPYA3Xs7i"}],"key":"P7S6lh0GE4"}],"key":"amTMl1oAul"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print the number of \"triples\" in the Graph\nprint(f\"Graph g has {len(g)} statements.\")","key":"Dy77LXngrP"},{"type":"outputs","id":"GX58DYQ_ySEF5pN7uRAym","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Graph g has 102 statements.\n"},"key":"fnyrLgo21Q"}],"key":"VM4nsZE2bw"}],"key":"E6DpHG9t4R"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Finally, we’ll print the contents of the model since it’s not that large.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"c9xL41VlKc"}],"key":"aflvccR8Jz"}],"key":"R8r13rjFIu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Print out the entire Graph in the RDF Turtle format\nprint(g.serialize(format=\"turtle\"))","key":"Bz0Lr5srsw"},{"type":"outputs","id":"Dd6_4sMfz4WdIHUMD-_22","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"@prefix g36: <http://data.ashrae.org/standard223/1.0/extensions/g36#> .\n@prefix mysystem: <http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#> .\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix qudt: <http://qudt.org/schema/qudt/> .\n@prefix qudtqk: <http://qudt.org/vocab/quantitykind/> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix s223: <http://data.ashrae.org/standard223#> .\n@prefix unit: <http://qudt.org/vocab/unit/> .\n\nmysystem: a owl:Ontology ;\n    rdfs:label \"\" ;\n    owl:imports <http://data.ashrae.org/standard223/1.0/model/all> .\n\nmysystem:PhysicalSpace a s223:PhysicalSpace ;\n    rdfs:label \"Physicalspace\" ;\n    s223:encloses mysystem:PhysicalSpace-hvac-domain .\n\nmysystem:VAVCoolingOnly a s223:SingleDuctTerminal,\n        g36:VAV ;\n    rdfs:label \"Vavcoolingonly\" ;\n    s223:cnx mysystem:VAVCoolingOnly-in,\n        mysystem:VAVCoolingOnly-out ;\n    s223:contains mysystem:VAVCoolingOnly-damper .\n\nmysystem:VAVCoolingOnly-damper-actuator a s223:Actuator ;\n    rdfs:label \"Vavcoolingonly Damper Actuator\" ;\n    s223:actuatedByProperty mysystem:VAVCoolingOnly-damper-command ;\n    s223:actuates mysystem:VAVCoolingOnly-damper .\n\nmysystem:VAVCoolingOnly-discharge-air-flow-sensor a s223:Sensor ;\n    rdfs:label \"Vavcoolingonly Discharge Air Flow Sensor\" ;\n    s223:hasObservationLocation mysystem:VAVCoolingOnly-out ;\n    s223:observes mysystem:VAVCoolingOnly-discharge-air-flow .\n\nmysystem:VAVCoolingOnly-duct-after-damper a s223:Connection,\n        s223:Duct ;\n    rdfs:label \"Vavcoolingonly Duct After Damper\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-duct-before-damper a s223:Connection,\n        s223:Duct ;\n    rdfs:label \"Vavcoolingonly Duct Before Damper\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:zone a s223:Zone,\n        g36:Zone ;\n    rdfs:label \"Zone\" ;\n    s223:hasDomain s223:Domain-HVAC ;\n    s223:hasDomainSpace mysystem:PhysicalSpace-hvac-domain ;\n    s223:hasProperty mysystem:zone-co2-concentration,\n        mysystem:zone-temp .\n\nmysystem:PhysicalSpace-hvac-domain-in a s223:InletConnectionPoint ;\n    rdfs:label \"Physicalspace Hvac Domain In\" ;\n    s223:cnx mysystem:vav-supply-to-room-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:PhysicalSpace-hvac-domain-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Physicalspace Hvac Domain Out\" ;\n    s223:cnx mysystem:room-return-to-vav-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-damper-in a s223:InletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Damper In\" ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:mapsTo mysystem:VAVCoolingOnly-in .\n\nmysystem:VAVCoolingOnly-damper-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Damper Out\" ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:mapsTo mysystem:VAVCoolingOnly-out .\n\nmysystem:VAVCoolingOnly-damper-position a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Vavcoolingonly Damper Position\" ;\n    qudt:hasQuantityKind qudtqk:DimensionlessRatio ;\n    qudt:hasUnit unit:PERCENT .\n\nmysystem:zone-co2-concentration a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Zone Co2 Concentration\" ;\n    s223:ofMedium s223:Fluid-Air ;\n    s223:ofSubstance s223:Constituent-CO2 ;\n    qudt:hasQuantityKind qudtqk:MoleFraction ;\n    qudt:hasUnit unit:PPM .\n\nmysystem:zone-temp a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Zone Temp\" ;\n    qudt:hasQuantityKind qudtqk:Temperature ;\n    qudt:hasUnit unit:DEG_C .\n\nmysystem:PhysicalSpace-hvac-domain a s223:DomainSpace ;\n    rdfs:label \"Physicalspace Hvac Domain\" ;\n    s223:cnx mysystem:PhysicalSpace-hvac-domain-in,\n        mysystem:PhysicalSpace-hvac-domain-out ;\n    s223:hasDomain s223:Domain-HVAC .\n\nmysystem:VAVCoolingOnly-damper a s223:Damper,\n        g36:Damper ;\n    rdfs:label \"Vavcoolingonly Damper\" ;\n    s223:cnx mysystem:VAVCoolingOnly-damper-in,\n        mysystem:VAVCoolingOnly-damper-out ;\n    s223:hasProperty mysystem:VAVCoolingOnly-damper-command,\n        mysystem:VAVCoolingOnly-damper-position .\n\nmysystem:VAVCoolingOnly-damper-command a s223:QuantifiableActuatableProperty ;\n    rdfs:label \"Vavcoolingonly Damper Command\" ;\n    s223:hasAspect s223:Binary-Position ;\n    qudt:hasQuantityKind qudtqk:DimensionlessRatio ;\n    qudt:hasUnit unit:PERCENT .\n\nmysystem:VAVCoolingOnly-discharge-air-flow a s223:QuantifiableObservableProperty ;\n    rdfs:label \"Vavcoolingonly Discharge Air Flow\" ;\n    s223:hasAspect s223:Role-Discharge ;\n    qudt:hasQuantityKind qudtqk:VolumeFlowRate ;\n    qudt:hasUnit unit:FT3-PER-MIN .\n\nmysystem:VAVCoolingOnly-in a s223:InletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly In\" ;\n    s223:cnx mysystem:room-return-to-vav-connection ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:room-return-to-vav-connection a s223:Connection ;\n    rdfs:label \"Room Return To Vav Connection\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:vav-supply-to-room-connection a s223:Connection ;\n    rdfs:label \"Vav Supply To Room Connection\" ;\n    s223:hasMedium s223:Fluid-Air .\n\nmysystem:VAVCoolingOnly-out a s223:OutletConnectionPoint ;\n    rdfs:label \"Vavcoolingonly Out\" ;\n    s223:cnx mysystem:vav-supply-to-room-connection ;\n    s223:hasMedium s223:Fluid-Air ;\n    s223:hasProperty mysystem:VAVCoolingOnly-discharge-air-flow .\n\n\n"},"key":"jOV6l12IMS"}],"key":"KOelmNsblO"}],"key":"RbvfJ9eqEh"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Model Querying","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"ffPQmjCv5k"}],"identifier":"model-querying","label":"Model Querying","html_id":"model-querying","implicit":true,"key":"YsYuHKap8Y"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"After exploring the model to get a sense for what it contains, let’s query the model using RDFLib (this can also be done with ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"ywJxsTgxrF"},{"type":"link","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"Open223 Query","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"za6wZWsUz0"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"yiWpTD1h9Q"},{"type":"text","value":"). For this tutorial, we’ll query the model for all the VAV terminal’s points, which are instances of the following classes:","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"eYO5de5j6Q"}],"key":"vflA2b5AUR"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"link","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Open223 Explore links","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"GqvdhtusoY"}],"identifier":"open223-resources","label":"open223-resources","url":"/open223-resources","internal":true,"dataUrl":"/open223-resources.json","key":"aNElL3ayUc"},{"type":"text","value":":","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"Ld7CYddk8h"}],"key":"zccN4LCqwF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":57,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://explore.open223.info/s223/QuantifiableActuatableProperty.html","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"QuantifiableActuatableProperty","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"dru1KQAML9"}],"urlSource":"https://explore.open223.info/s223/QuantifiableActuatableProperty.html","key":"gngWMp35o2"}],"key":"uzlKOjA1vA"}],"key":"DwsryTJrKL"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://explore.open223.info/s223/QuantifiableObservableProperty.html","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"QuantifiableObservableProperty","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"pyPilSkp1Q"}],"urlSource":"https://explore.open223.info/s223/QuantifiableObservableProperty.html","key":"ljT1zhlY5R"}],"key":"qkyjHNCzrE"}],"key":"yQpQpJ6TIa"}],"key":"NrbRcBgMfT"}],"key":"UsIilyaKfR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Query the data in g using SPARQL\nq = \"\"\"\nPREFIX s223: <http://data.ashrae.org/standard223#>\n\nSELECT ?obj WHERE {\n  { ?obj a s223:QuantifiableActuatableProperty . }\n  \tUNION\n  { ?obj a s223:QuantifiableObservableProperty . }\n}\n\"\"\"\n\n# Apply the query to the graph and iterate through results\nfor r in g.query(q):\n    print(r)","key":"kg7vL4Nczi"},{"type":"outputs","id":"g1dX4Un0AacsbblVmY2qa","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-damper-command'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-damper-position'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#zone-co2-concentration'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#zone-temp'),)\n(rdflib.term.URIRef('http://data.ashrae.org/standard223/1.0/data/guideline36-2021-A-1#VAVCoolingOnly-discharge-air-flow'),)\n"},"key":"BFYgUGZeMz"}],"key":"HEZfc5A3IR"}],"key":"dfB4eZZ3DD"}],"key":"GyDAJHo68m"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Sensors and Properties","url":"/sensors-and-properties","group":"Explanation"},"next":{"title":"Model Inference","url":"/model-inference","group":"Tutorials"}}},"domain":"http://localhost:3000"}